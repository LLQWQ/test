import{e as ee,m as M,n as j,E as he,Q as J,h as Q,l as Me,f as te,u as De,b as l,H as N,I as F,k as ne,af as Ae,ag as $e,ah as je,V as Ne,ai as Fe,aj as Oe,R as ze,r as V,P as Ue,ak as We,g as $,j as qe,a6 as Ke,J as He,a4 as Je,M as K,a1 as Ye,al as Qe,p as Z,am as Ge,an as ie,s as me,d as Y,ao as Xe,S as re,_ as Ze,o as L,c as U,w as W,a as v,F as se,y as ce,x as et,C as ue,D as de,z as H,t as p}from"./index.35e1b9dc.js";import{I as tt}from"./index.d8a69752.js";import{u as ve,b as be}from"./mount-component.b7f8db3d.js";import{D as nt}from"./index.2bbac80c.js";import{s as at}from"./index.43d3392f.js";import{B as lt}from"./index.33951877.js";const[ot,A]=ee("cell"),_e={tag:M("div"),icon:String,size:String,title:j,value:j,label:j,center:Boolean,isLink:Boolean,border:he,required:Boolean,iconPrefix:String,valueClass:J,labelClass:J,titleClass:J,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},it=Q({},_e,Me);var rt=te({name:ot,props:it,setup(e,{slots:n}){const a=De(),u=()=>{if(n.label||N(e.label))return l("div",{class:[A("label"),e.labelClass]},[n.label?n.label():e.label])},r=()=>{if(n.title||N(e.title))return l("div",{class:[A("title"),e.titleClass],style:e.titleStyle},[n.title?n.title():l("span",null,[e.title]),u()])},d=()=>{const c=n.value||n.default;if(c||N(e.value))return l("div",{class:[A("value"),e.valueClass]},[c?c():l("span",null,[e.value])])},T=()=>{if(n.icon)return n.icon();if(e.icon)return l(F,{name:e.icon,class:A("left-icon"),classPrefix:e.iconPrefix},null)},y=()=>{if(n["right-icon"])return n["right-icon"]();if(e.isLink){const c=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return l(F,{name:c,class:A("right-icon")},null)}};return()=>{var c;const{tag:b,size:g,center:C,border:x,isLink:R,required:I}=e,w=(c=e.clickable)!=null?c:R,S={center:C,required:I,clickable:w,borderless:!x};return g&&(S[g]=!!g),l(b,{class:A(S),role:w?"button":void 0,tabindex:w?0:void 0,onClick:a},{default:()=>{var h;return[T(),r(),d(),y(),(h=n.extra)==null?void 0:h.call(n)]}})}}});const st=ne(rt);function ye(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function ct(e,n){if(ye(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function ut(e,n){return new Promise(a=>{const u=n.validator(e,n);if(je(u)){u.then(a);return}a(u)})}function fe(e,n){const{message:a}=n;return Ne(a)?a(e,n):a||""}function dt({target:e}){e.composing=!0}function ge({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function ft(e,n){const a=Ae();e.style.height="auto";let u=e.scrollHeight;if(Fe(n)){const{maxHeight:r,minHeight:d}=n;r!==void 0&&(u=Math.min(u,r)),d!==void 0&&(u=Math.max(u,d))}u&&(e.style.height=`${u}px`,$e(a))}function gt(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function X(e){return[...e].length}function ht(e,n){return[...e].slice(0,n).join("")}const[mt,_]=ee("field"),ae={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:j,formatter:Function,clearIcon:M("clear"),modelValue:Oe(""),inputAlign:String,placeholder:String,autocomplete:String,errorMessage:String,enterkeyhint:String,clearTrigger:M("focus"),formatTrigger:M("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},vt=Q({},_e,ae,{rows:j,type:M("text"),rules:Array,autosize:[Boolean,Object],labelWidth:j,labelClass:J,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var bt=te({name:mt,props:vt,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:a}){const u=ve(),r=ze({status:"unvalidated",focused:!1,validateMessage:""}),d=V(),T=V(),y=V(),{parent:c}=Ue(We),b=()=>{var t;return String((t=e.modelValue)!=null?t:"")},g=t=>{if(N(e[t]))return e[t];if(c&&N(c.props[t]))return c.props[t]},C=$(()=>{const t=g("readonly");if(e.clearable&&!t){const i=b()!=="",s=e.clearTrigger==="always"||e.clearTrigger==="focus"&&r.focused;return i&&s}return!1}),x=$(()=>y.value&&a.input?y.value():e.modelValue),R=t=>t.reduce((i,s)=>i.then(()=>{if(r.status==="failed")return;let{value:m}=x;if(s.formatter&&(m=s.formatter(m,s)),!ct(m,s)){r.status="failed",r.validateMessage=fe(m,s);return}if(s.validator)return ye(m)&&s.validateEmpty===!1?void 0:ut(m,s).then(E=>{E&&typeof E=="string"?(r.status="failed",r.validateMessage=E):E===!1&&(r.status="failed",r.validateMessage=fe(m,s))})}),Promise.resolve()),I=()=>{r.status="unvalidated",r.validateMessage=""},w=()=>n("endValidate",{status:r.status,message:r.validateMessage}),S=(t=e.rules)=>new Promise(i=>{I(),t?(n("startValidate"),R(t).then(()=>{r.status==="failed"?(i({name:e.name,message:r.validateMessage}),w()):(r.status="passed",i(),w())})):i()}),h=t=>{if(c&&e.rules){const{validateTrigger:i}=c.props,s=ie(i).includes(t),m=e.rules.filter(E=>E.trigger?ie(E.trigger).includes(t):s);m.length&&S(m)}},O=t=>{const{maxlength:i}=e;if(N(i)&&X(t)>i){const s=b();return s&&X(s)===+i?s:ht(t,+i)}return t},k=(t,i="onChange")=>{if(t=O(t),e.type==="number"||e.type==="digit"){const s=e.type==="number";t=Qe(t,s,s)}if(e.formatter&&i===e.formatTrigger&&(t=e.formatter(t)),d.value&&d.value.value!==t){const{selectionStart:s,selectionEnd:m}=d.value;d.value.value=t,d.value.setSelectionRange(s,m)}t!==e.modelValue&&n("update:modelValue",t)},D=t=>{t.target.composing||k(t.target.value)},o=()=>{var t;return(t=d.value)==null?void 0:t.blur()},B=()=>{var t;return(t=d.value)==null?void 0:t.focus()},P=()=>{const t=d.value;e.type==="textarea"&&e.autosize&&t&&ft(t,e.autosize)},f=t=>{r.focused=!0,n("focus",t),K(P),g("readonly")&&o()},z=t=>{g("readonly")||(r.focused=!1,k(b(),"onBlur"),n("blur",t),h("onBlur"),K(P),Xe())},G=t=>n("clickInput",t),Ce=t=>n("clickLeftIcon",t),xe=t=>n("clickRightIcon",t),Ie=t=>{Z(t),n("update:modelValue",""),n("clear",t)},le=$(()=>{if(typeof e.error=="boolean")return e.error;if(c&&c.props.showError&&r.status==="failed")return!0}),we=$(()=>{const t=g("labelWidth");if(t)return{width:qe(t)}}),Se=t=>{t.keyCode===13&&(!(c&&c.props.submitOnEnter)&&e.type!=="textarea"&&Z(t),e.type==="search"&&o()),n("keypress",t)},oe=()=>e.id||`${u}-input`,Ve=()=>r.status,Ee=()=>{const t=_("control",[g("inputAlign"),{error:le.value,custom:!!a.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(a.input)return l("div",{class:t,onClick:G},[a.input()]);const i={id:oe(),ref:d,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:g("disabled"),readonly:g("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,enterkeyhint:e.enterkeyhint,"aria-labelledby":e.label?`${u}-label`:void 0,onBlur:z,onFocus:f,onInput:D,onClick:G,onChange:ge,onKeypress:Se,onCompositionend:ge,onCompositionstart:dt};return e.type==="textarea"?l("textarea",i,null):l("input",me(gt(e.type),i),null)},Le=()=>{const t=a["left-icon"];if(e.leftIcon||t)return l("div",{class:_("left-icon"),onClick:Ce},[t?t():l(F,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},Te=()=>{const t=a["right-icon"];if(e.rightIcon||t)return l("div",{class:_("right-icon"),onClick:xe},[t?t():l(F,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Pe=()=>{if(e.showWordLimit&&e.maxlength){const t=X(b());return l("div",{class:_("word-limit")},[l("span",{class:_("word-num")},[t]),Y("/"),e.maxlength])}},Re=()=>{if(c&&c.props.showErrorMessage===!1)return;const t=e.errorMessage||r.validateMessage;if(t){const i=a["error-message"],s=g("errorMessageAlign");return l("div",{class:_("error-message",s)},[i?i({message:t}):t])}},Be=()=>{const t=g("colon")?":":"";if(a.label)return[a.label(),t];if(e.label)return l("label",{id:`${u}-label`,for:oe()},[e.label+t])},pe=()=>[l("div",{class:_("body")},[Ee(),C.value&&l(F,{ref:T,name:e.clearIcon,class:_("clear")},null),Te(),a.button&&l("div",{class:_("button")},[a.button()])]),Pe(),Re()];return be({blur:o,focus:B,validate:S,formValue:x,resetValidation:I,getValidationStatus:Ve}),Ke(Ge,{customValue:y,resetValidation:I,validateWithTrigger:h}),He(()=>e.modelValue,()=>{k(b()),I(),h("onChange"),K(P)}),Je(()=>{k(b(),e.formatTrigger),K(P)}),Ye("touchstart",Ie,{target:$(()=>{var t;return(t=T.value)==null?void 0:t.$el})}),()=>{const t=g("disabled"),i=g("labelAlign"),s=Be(),m=Le(),E=()=>i==="top"?[m,s]:s;return l(st,{size:e.size,class:_({error:le.value,disabled:t,[`label-${i}`]:i}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:we.value,valueClass:_("value"),titleClass:[_("label",[i,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:m&&i!=="top"?()=>m:null,title:s||i==="top"?E:null,value:pe,extra:a.extra})}}});const ke=ne(bt),[_t,q,yt]=ee("search"),kt=Q({},ae,{label:String,shape:M("square"),leftIcon:M("search"),clearable:he,actionText:String,background:String,showAction:Boolean});var Ct=te({name:_t,props:kt,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:a,attrs:u}){const r=ve(),d=V(),T=()=>{a.action||(n("update:modelValue",""),n("cancel"))},y=o=>{o.keyCode===13&&(Z(o),n("search",e.modelValue))},c=()=>e.id||`${r}-input`,b=()=>{if(a.label||e.label)return l("label",{class:q("label"),for:c()},[a.label?a.label():e.label])},g=()=>{if(e.showAction){const o=e.actionText||yt("cancel");return l("div",{class:q("action"),role:"button",tabindex:0,onClick:T},[a.action?a.action():o])}},C=()=>{var o;return(o=d.value)==null?void 0:o.blur()},x=()=>{var o;return(o=d.value)==null?void 0:o.focus()},R=o=>n("blur",o),I=o=>n("focus",o),w=o=>n("clear",o),S=o=>n("clickInput",o),h=o=>n("clickLeftIcon",o),O=o=>n("clickRightIcon",o),k=Object.keys(ae),D=()=>{const o=Q({},u,re(e,k),{id:c()}),B=P=>n("update:modelValue",P);return l(ke,me({ref:d,type:"search",class:q("field"),border:!1,onBlur:R,onFocus:I,onClear:w,onKeypress:y,onClickInput:S,onClickLeftIcon:h,onClickRightIcon:O,"onUpdate:modelValue":B},o),re(a,["left-icon","right-icon"]))};return be({focus:x,blur:C}),()=>{var o;return l("div",{class:q({"show-action":e.showAction}),style:{background:e.background}},[(o=a.left)==null?void 0:o.call(a),l("div",{class:q("content",e.shape)},[b(),D()]),g()])}}});const xt=ne(Ct);const It={class:"search"},wt={class:"content"},St={class:"i_left"},Vt={class:"sex"},Et={class:"info"},Lt={class:"name"},Tt={class:"hospital"},Pt={class:"i_right"},Rt={class:"i_left"},Bt={class:"sex"},pt={class:"info"},Mt={class:"name"},Dt={class:"hospital"},At={class:"i_right"},$t={__name:"Search",setup(e){const n=V(),a=V([{sex:0,name:"\u5F20",phone:110,hospital:"\u4E0A\u6D77\u5E02\u7B2C\u5341\u4EBA\u6C11\u533B\u9662"}]),u=V(),r=()=>{},d=()=>{},T=()=>{},y=V(!1),c=S=>{u.value=S,y.value=!0},b=()=>{console.log("\u6DFB\u52A0"),x.value=!0},g=()=>{console.log("\u53D6\u6D88")},C=V(null),x=V(!1),R=$(()=>!C.value),I=()=>{console.log("\u6DFB\u52A0"),C.value=null,at("\u6DFB\u52A0\u8BF7\u6C42\u5DF2\u53D1\u9001,\u8BF7\u7B49\u5F85\u9A8C\u8BC1\u7ED3\u679C!")},w=()=>{console.log("\u53D6\u6D88"),emark.value=null};return(S,h)=>{const O=xt,k=tt,D=F,o=lt,B=nt,P=ke;return L(),U("div",It,[l(O,{modelValue:n.value,"onUpdate:modelValue":h[0]||(h[0]=f=>n.value=f),"show-action":"",placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",onSearch:r},{action:W(()=>[ue(v("div",{onClick:d},"\u641C\u7D22",512),[[de,a.value.length==0]]),ue(v("div",{onClick:T},"\u53D6\u6D88",512),[[de,a.value.length!==0]])]),_:1},8,["modelValue"]),v("div",wt,[(L(!0),U(se,null,ce(a.value,(f,z)=>(L(),U("div",{class:"item",key:z},[v("div",St,[v("div",Vt,[f.sex==0?(L(),H(k,{key:0,round:"",width:"60px",height:"60px",src:"https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg"})):(L(),H(k,{key:1,round:"",fit:"contain",width:"60px",height:"60px",src:"https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg"}))]),v("div",Et,[v("div",Lt,p(f.name)+"("+p(f.phone)+")",1),v("div",Tt,p(f.hospital),1)])]),v("div",Pt,[l(o,{type:"primary",onClick:G=>c(f.hospital)},{default:W(()=>[l(D,{name:"plus"}),Y("\u597D\u53CB")]),_:2},1032,["onClick"])])]))),128)),(L(!0),U(se,null,ce(a.value,(f,z)=>(L(),U("div",{class:"item",key:z},[v("div",Rt,[v("div",Bt,[f.sex==0?(L(),H(k,{key:0,round:"",width:"60px",height:"60px",src:"https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg"})):(L(),H(k,{key:1,round:"",fit:"contain",width:"60px",height:"60px",src:"https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg"}))]),v("div",pt,[v("div",Mt,p(f.name)+"("+p(f.phone)+")",1),v("div",Dt,p(f.hospital),1)])]),v("div",At,[l(o,{type:"primary"},{default:W(()=>[l(D,{name:"plus"}),Y("\u597D\u53CB")]),_:1})])]))),128))]),l(B,{"class-name":"friend",show:y.value,"onUpdate:show":h[1]||(h[1]=f=>y.value=f),title:"\u6DFB\u52A0\u4EB2\u53CB","show-cancel-button":"",onConfirm:b,onCancel:g},{default:W(()=>[Y(" \u662F\u5426\u8981\u6DFB\u52A0"+p(u.value)+"\u7684\u4EB2\u53CB ",1)]),_:1},8,["show"]),l(B,{"class-name":"remark",show:x.value,"onUpdate:show":h[3]||(h[3]=f=>x.value=f),title:"\u6DFB\u52A0\u5907\u6CE8","show-cancel-button":"","confirm-button-disabled":et(R),onConfirm:I,onCancel:w},{default:W(()=>[l(P,{modelValue:C.value,"onUpdate:modelValue":h[2]||(h[2]=f=>C.value=f),rows:"5",autosize:"",type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8","show-word-limit":""},null,8,["modelValue"])]),_:1},8,["show","confirm-button-disabled"])])}}},Wt=Ze($t,[["__scopeId","data-v-26d8fc4e"]]);export{Wt as default};
