import{P as M,m as N,a as z}from"./mount-component.b7f8db3d.js";import{e as L,m as k,n as w,ap as j,Q as C,f as q,J as v,a4 as U,aq as H,b as a,s as O,S as V,I as D,H as F,h,q as G,ai as J,r as Q,G as _,k as A}from"./index.35e1b9dc.js";import{L as E}from"./index.33951877.js";let u=0;function K(e){e?(u||document.body.classList.add("van-toast--unclickable"),u++):u&&(u--,u||document.body.classList.remove("van-toast--unclickable"))}const[R,l]=L("toast"),W=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],X={icon:String,show:Boolean,type:k("text"),overlay:Boolean,message:w,iconSize:w,duration:j(2e3),position:k("middle"),teleport:[String,Object],wordBreak:String,className:C,iconPrefix:String,transition:k("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:C,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var S=q({name:R,props:X,emits:["update:show"],setup(e,{emit:s,slots:o}){let d,i=!1;const c=()=>{const t=e.show&&e.forbidClick;i!==t&&(i=t,K(i))},r=t=>s("update:show",t),g=()=>{e.closeOnClick&&r(!1)},f=()=>clearTimeout(d),m=()=>{const{icon:t,type:n,iconSize:p,iconPrefix:T,loadingType:B}=e;if(t||n==="success"||n==="fail")return a(D,{name:t||n,size:p,class:l("icon"),classPrefix:T},null);if(n==="loading")return a(E,{class:l("loading"),size:p,type:B},null)},I=()=>{const{type:t,message:n}=e;if(o.message)return a("div",{class:l("text")},[o.message()]);if(F(n)&&n!=="")return t==="html"?a("div",{key:0,class:l("text"),innerHTML:String(n)},null):a("div",{class:l("text")},[n])};return v(()=>[e.show,e.forbidClick],c),v(()=>[e.show,e.type,e.message,e.duration],()=>{f(),e.show&&e.duration>0&&(d=setTimeout(()=>{r(!1)},e.duration))}),U(c),H(c),()=>a(M,O({class:[l([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:g,onClosed:f,"onUpdate:show":r},V(e,W)),{default:()=>[m(),I()]})}});const Y={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let y=[],Z=!1,b=h({},Y);const $=new Map;function P(e){return J(e)?e:{message:e}}function ee(){const{instance:e,unmount:s}=N({setup(){const o=Q(""),{open:d,state:i,close:c,toggle:r}=z(),g=()=>{},f=()=>a(S,O(i,{onClosed:g,"onUpdate:show":r}),null);return v(o,m=>{i.message=m}),_().render=f,{open:d,close:c,message:o}}});return e}function te(){if(!y.length||Z){const e=ee();y.push(e)}return y[y.length-1]}function ne(e={}){if(!G)return{};const s=te(),o=P(e);return s.open(h({},b,$.get(o.type||b.type),o)),s}const x=e=>s=>ne(h({type:e},P(s))),le=x("success"),ce=x("fail");A(S);export{ce as a,le as b,ne as s};
